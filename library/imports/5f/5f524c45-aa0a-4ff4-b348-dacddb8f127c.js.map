{"version":3,"sources":["assets\\Script\\Manager\\ListenerManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["interface IEventData {\r\n    func: Function;\r\n    target: any;\r\n}\r\n\r\ninterface IEvent {\r\n    [eventName: string]: IEventData[];\r\n}\r\n\r\nclass ListenerManagerClass {\r\n    private static _instance: ListenerManagerClass = null;\r\n    private handle: IEvent = {};\r\n\r\n    public static getInstance(): ListenerManagerClass {\r\n        if (null === this._instance) {\r\n            this._instance = new ListenerManagerClass();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    public on(eventName: string, cb: Function, target: any) {\r\n        if (this.hasEvent(eventName, cb, target)) {\r\n            return;\r\n        }\r\n\r\n        if (!this.handle[eventName]) {\r\n            this.handle[eventName] = [];\r\n        }\r\n        const data: IEventData = { func: cb, target };\r\n        this.handle[eventName].push(data);\r\n    }\r\n\r\n    public off(eventName: string, cb: Function, target?: any) {\r\n        const list = this.handle[eventName];\r\n        if (!list || list.length <= 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const event = list[i];\r\n            if (cb == event.func && (!target || target == event.target)) {\r\n                list.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public dispatch(eventName: string, ...args: any) {\r\n        const list = this.handle[eventName];\r\n        if (!list || list.length <= 0) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const event = list[i];\r\n            event.func.apply(event.target, args);\r\n        }\r\n    }\r\n\r\n    public removeAll(target?: any) {\r\n        if (target) {\r\n            for (let key in this.handle) {\r\n                let list = this.handle[key];\r\n                for (let i = 0, l = list.length; i < l; i++) {\r\n                    let event = list[i];\r\n                    if (event.target == target) {\r\n                        list.splice(i, 1);\r\n                        if (l > 0) {\r\n                            l--;\r\n                        }\r\n                        i--;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (let key in this.handle) {\r\n                const list = this.handle[key];\r\n                while (list.length > 0) {\r\n                    list.pop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public hasEvent(eventName: string, cb: Function, target?: any): boolean {\r\n        const list = this.handle[eventName];\r\n        if (!list || list.length <= 0) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const event = list[i];\r\n            if (cb == event.func && (!target || target == event.target)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nexport const ListenerManager = ListenerManagerClass.getInstance();\r\n"]}