{"version":3,"sources":["assets\\Script\\Main\\Money.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA8C;AAC9C,sDAAqD;AACrD,8DAA6D;AAC7D,0CAAyC;AAEnC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;QAAA,qEAkDC;QA/CW,mBAAa,GAAa,IAAI,CAAC;QAE/B,mBAAa,GAAa,IAAI,CAAC;QAE/B,iBAAW,GAAW,OAAO,CAAC;;IA2C1C,CAAC;IAxCG,oBAAK,GAAL;QAAA,iBAKC;QAJG,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,yBAAW,CAAC,QAAQ,GAAG,EAAE,CAAC;QACtD,iCAAe,CAAC,EAAE,CAAC,qBAAS,CAAC,kBAAkB,EAAE,UAAC,GAAG;YACjD,KAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAC/B,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAED,+BAAgB,GAAhB,UAAiB,GAAW;QACxB,yBAAW,CAAC,QAAQ,IAAI,GAAG,CAAC;QAC5B,sDAAsD;QACtD,IAAI,YAAY,GAAG,yBAAW,CAAC,QAAQ,CAAC;QACxC,IAAI,YAAY,IAAI,CAAC,EAAE;YACnB,YAAY,GAAG,CAAC,CAAC;SACpB;QACD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACvC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IACjE,CAAC;IAED,QAAQ;IACR,+BAAgB,GAAhB,UAAiB,SAAkB,EAAE,MAAc;QAAnD,iBAkBC;QAjBG,IAAI,GAAG,GAAG;YACN,GAAG,EAAE,CAAC;SACT,CAAC;QACF,GAAG,CAAC,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC;QAC1D,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC;aACR,EAAE,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE;YACtB,QAAQ,EAAE,UAAC,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;gBAC7B,SAAS,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACvF,OAAO,KAAK,GAAG,CAAC,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;YACrC,CAAC;SACJ,CAAC;aACD,IAAI,CAAC;YACF,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACvC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACtC,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,aAAK,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC3D,CAAC,CAAC;aACD,KAAK,EAAE,CAAC;IACjB,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACoB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACoB;IALtB,IAAI;QADxB,OAAO;OACa,IAAI,CAkDxB;IAAD,WAAC;CAlDD,AAkDC,CAlDiC,EAAE,CAAC,SAAS,GAkD7C;kBAlDoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import { EventType } from \"../Data/EventType\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\nimport { Utils } from \"../Manager/Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Gold extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    private moneyNumLabel: cc.Label = null;\r\n    @property(cc.Label)\r\n    private finalNumLabel: cc.Label = null;\r\n\r\n    private maxMoneyNum: number = 3000000;\r\n\r\n\r\n    start() {\r\n        this.moneyNumLabel.string = GameManager.moneyNum + \"\";\r\n        ListenerManager.on(EventType.CHANGE_MONEY_VALUE, (num) => {\r\n            this.changeGoldNumber(num);\r\n        }, this);\r\n    }\r\n\r\n    changeGoldNumber(num: number) {\r\n        GameManager.moneyNum += num;\r\n        // let curGoldNum = Number(this.moneyNumLabel.string);\r\n        let finalGoldNum = GameManager.moneyNum;\r\n        if (finalGoldNum <= 0) {\r\n            finalGoldNum = 0;\r\n        }\r\n        this.moneyNumLabel.node.active = true;\r\n        this.finalNumLabel.node.active = false;\r\n        this.updateNumberAnim(this.moneyNumLabel.node, finalGoldNum);\r\n    }\r\n\r\n    //更新数字变换\r\n    updateNumberAnim(labelNode: cc.Node, curNum: number) {\r\n        let obj = {\r\n            num: 0,\r\n        };\r\n        obj.num = Number(labelNode.getComponent(cc.Label).string);\r\n        cc.tween(obj)\r\n            .to(0.1, { num: curNum }, {\r\n                progress: (start, end, current, t) => {\r\n                    labelNode.getComponent(cc.Label).string = String(Math.ceil(start + (end - start) * t));\r\n                    return start + (end - start) * t;\r\n                }\r\n            })\r\n            .call(() => {\r\n                this.moneyNumLabel.node.active = false;\r\n                this.finalNumLabel.node.active = true;\r\n                this.finalNumLabel.string = Utils.formatNumber(curNum);\r\n            })\r\n            .start();\r\n    }\r\n\r\n}\r\n"]}