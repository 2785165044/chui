{"version":3,"sources":["assets\\Script\\Main\\GameScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { EventType } from \"../Data/EventType\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nconst posArr: cc.Vec2[][] = [[cc.v2(0, 0), cc.v2(0, -300), cc.v2(0, -100)],\r\n[cc.v2(0, 0), cc.v2(-50, -250), cc.v2(0, 0)]];\r\nconst scaleArr: number[][] = [[1, 1, 0.6], [1, 1.2, 0.8, 0.8]];\r\n@ccclass\r\nexport default class GameScene extends cc.Component {\r\n\r\n    // onLoad () {}\r\n    private index: number = -1;\r\n    /**竖屏--0  横屏--1 */\r\n    private screenStatus: number = -1;\r\n    /**当前播放动画 */\r\n    private curAction: cc.Action = null;\r\n    private moveSpeed: number = 1200;\r\n    start() {\r\n        this.changeDesignResolution();\r\n        ListenerManager.on(EventType.GAME_SCENE_MOVE, (index) => {\r\n            this.node.stopAllActions();\r\n            this.index = index;\r\n            let pos = posArr[this.screenStatus][this.index]\r\n            let distance = Math.sqrt(Math.pow((pos.x - this.node.position.x), 2) + Math.pow((pos.y - this.node.position.y), 2));\r\n            let time = distance / this.moveSpeed;\r\n            if (time >= 0.7) {\r\n                time = 0.7;\r\n            }\r\n            time = 0.4;\r\n            this.curAction = cc.spawn(\r\n                cc.moveTo(time, posArr[this.screenStatus][this.index]),\r\n                cc.scaleTo(time, scaleArr[this.screenStatus][this.index]),\r\n            )\r\n            this.node.runAction(this.curAction);\r\n        }, this);\r\n        ListenerManager.on(EventType.SCREEN_V, () => {\r\n            this.screenStatus = 0;\r\n            if (this.index != -1) {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][this.index]);\r\n                this.node.setScale(scaleArr[this.screenStatus][this.index]);\r\n            } else {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][0]);\r\n                this.node.setScale(scaleArr[this.screenStatus][0]);\r\n            }\r\n        }, this);\r\n        ListenerManager.on(EventType.SCREEN_H, () => {\r\n            this.screenStatus = 1;\r\n            if (this.index != -1) {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][this.index]);\r\n                this.node.setScale(scaleArr[this.screenStatus][this.index]);\r\n            } else {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][0]);\r\n                this.node.setScale(scaleArr[this.screenStatus][0]);\r\n            }\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n   * 屏幕适配\r\n   * @returns \r\n   */\r\n    changeDesignResolution() {\r\n        //获取当前屏幕宽高\r\n        let frameWidth = cc.view.getFrameSize().width;\r\n        let frameHeight = cc.view.getFrameSize().height;\r\n        if (frameHeight >= frameWidth) {\r\n            this.screenStatus = 0;\r\n            if (this.index == -1) {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][0]);\r\n                this.node.setScale(scaleArr[this.screenStatus][0]);\r\n            }\r\n        } else {\r\n            this.screenStatus = 1;\r\n            if (this.index == -1) {\r\n                this.node.stopAction(this.curAction);\r\n                this.node.setPosition(posArr[this.screenStatus][0]);\r\n                this.node.setScale(scaleArr[this.screenStatus][0]);\r\n            }\r\n        }\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}