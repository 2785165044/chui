{"version":3,"sources":["assets\\Script\\Main\\MainLogic.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { EventType } from \"../Data/EventType\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { Utils } from \"../Manager/Utils\";\r\nimport Ball from \"./Ball\";\r\nimport CardCtrl from \"./CardCtrl\";\r\nimport SetLevel from \"./SetLevel\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainLogic extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    private ballUi: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private cardParent: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private maskNode: cc.Node = null;\r\n\r\n    //当前显示小球在父级中的索引\r\n    private ballIndex: number = -1;\r\n    //当前需要点击的数字\r\n    private curNum: number = -1;\r\n    //\r\n    private audioNameArr: string[] = [\"G8\", \"O62\", \"N35\", \"B3\", \"G59\", \"B5\", \"O66\", \"O72\"];\r\n\r\n    private ballParent: cc.Node = null;\r\n\r\n    private cardPosArr: cc.Vec2[][] = [\r\n        [cc.v2(0, 0)], // 竖屏时居中\r\n        [cc.v2(0, 0)], // 横屏时居中\r\n    ];\r\n\r\n    private need_touch_card: cc.Node[] = [];\r\n\r\n\r\n    private isTimeOut: boolean = false;\r\n\r\n    start() {\r\n        this.ballParent = this.ballUi.getChildByName(\"mask\").getChildByName(\"ballParent\");\r\n\r\n        this.ballUi.getComponent(Ball).createBall(this.audioNameArr);\r\n\r\n        this.changeDesignResolution();\r\n\r\n        ListenerManager.on(EventType.SCREEN_V, () => {\r\n            this.changeDesignResolution();\r\n        }, this);\r\n\r\n        ListenerManager.on(EventType.SCREEN_H, () => {\r\n            this.changeDesignResolution();\r\n        }, this);\r\n\r\n        ListenerManager.on(EventType.NEED_TOUCH_CARD, (node: cc.Node) => {\r\n            this.need_touch_card.push(node);\r\n            if (this.maskNode.isValid) {\r\n                if (!this.maskNode.active) {\r\n                    this.maskNode.active = true;\r\n                    this.maskNode.setPosition(Utils.getNodePos(this.need_touch_card[0], this.maskNode.parent));\r\n                    this.maskNode.opacity = 0;\r\n                    this.maskNode.runAction(cc.fadeIn(0.3));\r\n\r\n                    let tip: cc.Node = this.node.parent.getChildByName(\"tip\");\r\n                    tip.active = true;\r\n                    tip.opacity = 0;\r\n                    tip.runAction(cc.fadeIn(0.3));\r\n                }\r\n            }\r\n        }, this);\r\n\r\n        ListenerManager.on(EventType.TOUCH_CARD, (node: cc.Node) => {\r\n            this.need_touch_card.splice(this.need_touch_card.indexOf(node), 1);\r\n            if (this.need_touch_card.length == 0) {\r\n                if (this.ballIndex >= 2) {\r\n                    ListenerManager.dispatch(EventType.GAME_OVER);\r\n                } else {\r\n                    this.moveBallParent();\r\n                }\r\n            }\r\n            if (this.maskNode.isValid) {\r\n                this.maskNode.runAction(\r\n                    cc.sequence(\r\n                        cc.fadeOut(0.3),\r\n                        cc.callFunc(() => {\r\n                            this.maskNode.destroy();\r\n                        })\r\n                    )\r\n                );\r\n\r\n                let tip: cc.Node = this.node.parent.getChildByName(\"tip\");\r\n                tip.runAction(cc.fadeOut(0.3));\r\n            }\r\n        }, this);\r\n\r\n        ListenerManager.on(EventType.START_TIME, () => {\r\n            this.unscheduleAllCallbacks();\r\n\r\n            this.scheduleOnce(() => {\r\n                //\r\n                // \r\n                ListenerManager.dispatch(EventType.GAME_OVER);\r\n            }, 100);\r\n        }, this);\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        // for (let i = 0; i < this.cardParent.childrenCount; i++) {\r\n        //     let card: cc.Node = this.cardParent.children[i];\r\n        //     Utils.flipY(card, 1);\r\n        // }\r\n\r\n        this.moveBallParent();\r\n\r\n    }\r\n\r\n    //显示下个数字小球\r\n    moveBallParent() {\r\n        this.ballIndex += 1;\r\n        this.curNum = this.ballUi.getComponent(Ball).moveBallParent(() => {\r\n            this.scheduleOnce(() => {\r\n                ListenerManager.dispatch(EventType.DISPLAY_HAND, this.curNum);\r\n            }, 0.5);\r\n        });\r\n    }\r\n\r\n    //播放动画\r\n    playAn(node: cc.Node, callback: Function = null) {\r\n        node.active = true;\r\n        node.getComponent(cc.Animation).play();\r\n        node.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED, () => {\r\n            node.active = false;\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 屏幕适配\r\n     * @returns \r\n     */\r\n    changeDesignResolution() {\r\n        //未检测到尺寸变化则跳出函数\r\n        //获取当前屏幕宽高\r\n        let frameWidth = cc.view.getFrameSize().width;\r\n        let frameHeight = cc.view.getFrameSize().height;\r\n        if (frameHeight >= frameWidth) {\r\n            this.SCREEN_V();\r\n        } else {\r\n            this.SCREEN_H();\r\n        }\r\n    }\r\n\r\n    SCREEN_V() {\r\n        // this.ballUi.setPosition(cc.v2(0, 360));\r\n        this.ballUi.getComponent(cc.Widget).isAlignVerticalCenter = false;\r\n        this.ballUi.getComponent(cc.Widget).isAlignHorizontalCenter = true;\r\n        this.ballUi.getComponent(cc.Widget).isAlignLeft = false;\r\n        this.ballUi.getComponent(cc.Widget).isAlignTop = true;\r\n        this.ballUi.getComponent(cc.Widget).top = 100;\r\n        this.ballUi.angle = 0;\r\n        this.ballUi.setScale(1.2);\r\n\r\n        for (let i = 0; i < this.ballParent.childrenCount; i++) {\r\n            this.ballParent.children[i].angle = 0;\r\n        }\r\n\r\n        this.cardParent.setPosition(cc.v2(0, -80));\r\n        this.cardParent.setScale(0.45);\r\n        if (this.cardParent.childrenCount > 0) {\r\n        this.cardParent.children[0].setPosition(this.cardPosArr[0][0]);\r\n    }\r\n        for (let i = 0; i < this.cardParent.childrenCount; i++) {\r\n            this.cardParent.children[i].setPosition(this.cardPosArr[0][i]);\r\n        }\r\n    }\r\n\r\n    SCREEN_H() {\r\n        for (let i = 0; i < this.ballParent.childrenCount; i++) {\r\n            this.ballParent.children[i].angle = 90;\r\n        }\r\n\r\n        this.cardParent.setPosition(cc.v2(100, 0));\r\n        this.cardParent.setScale(0.7);\r\n        for (let i = 0; i < this.cardParent.childrenCount; i++) {\r\n            this.cardParent.children[i].setPosition(this.cardPosArr[1][i]);\r\n        }\r\n\r\n        this.ballUi.getComponent(cc.Widget).isAlignHorizontalCenter = false;\r\n        this.ballUi.getComponent(cc.Widget).isAlignVerticalCenter = true;\r\n        this.ballUi.getComponent(cc.Widget).isAlignTop = false;\r\n        this.ballUi.getComponent(cc.Widget).isAlignLeft = true;\r\n        if (this.isTablet()) {\r\n            this.ballUi.getComponent(cc.Widget).left = 150;\r\n            this.cardParent.setPosition(cc.v2(150, 0));\r\n            this.cardParent.setScale(0.6);\r\n        } else {\r\n            this.ballUi.getComponent(cc.Widget).left = 250;\r\n            this.cardParent.setPosition(cc.v2(100, 0));\r\n            this.cardParent.setScale(0.7);\r\n            if (this.cardParent.childrenCount > 0) {\r\n        this.cardParent.children[0].setPosition(this.cardPosArr[1][0]);\r\n    }\r\n        }\r\n\r\n        this.ballUi.angle = -90;\r\n        this.ballUi.setScale(2);\r\n\r\n\r\n    }\r\n\r\n    //检测平板\r\n    private isTablet() {\r\n        const ua = navigator.userAgent.toLowerCase();\r\n\r\n        // 检查用户代理字符串中是否存在常见平板设备标识\r\n        const isAndroidTablet = /android/.test(ua) && !/mobile/.test(ua);\r\n        const isIPad = /ipad/.test(ua) || /macintosh/i.test(ua);\r\n\r\n        // iPadOS 13 及更高版本识别：它们可能显示为桌面级浏览器\r\n        const isIpadOS13Up = () => (\r\n            /macintosh/.test(ua) && navigator.maxTouchPoints && navigator.maxTouchPoints > 1\r\n        );\r\n\r\n        // 结合条件判断\r\n        return isAndroidTablet || isIPad || isIpadOS13Up();\r\n    }\r\n}\r\n"]}