{"version":3,"sources":["assets\\Script\\Main\\Ball.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { EventType } from \"../Data/EventType\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { Utils } from \"../Manager/Utils\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Ball extends cc.Component {\r\n\r\n\r\n    @property(cc.Node)\r\n    private initBallParent: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    private ballParent: cc.Node = null;\r\n\r\n    //音频名字数组\r\n    private audioNameArr: string[] = [];\r\n\r\n    //每个小球之间的距离\r\n    private ballDis: number = 140;\r\n\r\n    //小球每次向前移动的所需时间\r\n    private moveTime: number = 0.3;\r\n\r\n    //小球每次向前移动的距离\r\n    private moveDis: number = 140;\r\n\r\n    //小球向前移动次数\r\n    private moveIndex: number = -1;\r\n\r\n    createBall(audioArr: string[]) {\r\n        this.audioNameArr = audioArr;\r\n        for (let i = 0; i < this.audioNameArr.length; i++) {\r\n            let pos: cc.Vec2 = cc.v2(0 - this.ballDis * i, 0);\r\n            let name: string = Utils.getString(this.audioNameArr[i]);\r\n            let num: number = Utils.getNum(this.audioNameArr[i]);\r\n            let ball: cc.Node = cc.instantiate(this.initBallParent.getChildByName(name));\r\n            ball.setParent(this.ballParent);\r\n            ball.setPosition(pos);\r\n            ball.getChildByName(\"numLabel\").getComponent(cc.Label).string = String(num);\r\n            ball.active = true;\r\n        }\r\n    }\r\n\r\n    //小球整体移动\r\n    moveBallParent(callback: Function = null) {\r\n        this.moveIndex += 1;\r\n        let targetPos: cc.Vec2 = cc.v2(this.ballParent.position.x + this.moveDis, this.ballParent.position.y);\r\n        let ball: cc.Node = this.ballParent.children[this.moveIndex];\r\n        ball.active = true;\r\n        this.ballParent.runAction(\r\n            cc.sequence(\r\n                cc.delayTime(0.3),\r\n                cc.callFunc(() => {\r\n                    ball.runAction(\r\n                        cc.scaleTo(this.moveTime, 0.9)\r\n                    );\r\n\r\n                    let oldBall: cc.Node = this.ballParent.children[this.moveIndex - 1];\r\n                    if (oldBall) {\r\n                        oldBall.runAction(\r\n                            cc.scaleTo(this.moveTime, 0.7)\r\n                        );\r\n                    }\r\n                }),\r\n                cc.moveTo(this.moveTime, targetPos),\r\n                cc.callFunc(() => {\r\n                    if (GameManager.canPlayAudio) {\r\n                        SoundManager.playEffect(this.audioNameArr[this.moveIndex], false, false, false);\r\n                    }\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                })\r\n            )\r\n        );\r\n\r\n        return Number(ball.getChildByName(\"numLabel\").getComponent(cc.Label).string);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}