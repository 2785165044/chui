{"version":3,"sources":["assets\\Script\\Main\\SetLevel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { EventType } from \"../Data/EventType\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\nimport { Utils } from \"../Manager/Utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SetLevel extends cc.Component {\r\n\r\n    // onLoad () {}\r\n\r\n    /**行数 */\r\n    private rowNum: number = 5;\r\n    /**列数 */\r\n    private colNum: number = 5;\r\n    /**行差 */\r\n    private rowDif: number = 110;\r\n    /**列差 */\r\n    private colDif: number = 100;\r\n    /**中心点位置坐标 */\r\n    private centerPos: cc.Vec2 = cc.v2(0, 0);\r\n    //左上角位置\r\n    private initPos: cc.Vec2 = null;\r\n\r\n    private initNode: cc.Node = null;\r\n\r\n    private itemParent: cc.Node = null;\r\n\r\n    onLoad() {\r\n        this.initNode = this.node.getChildByName(\"initNode\");\r\n        this.itemParent = this.node.getChildByName(\"parent\");\r\n        this.initPos = cc.v2(this.centerPos.x - this.colDif * 2, this.centerPos.y);\r\n    }\r\n\r\n    //显示当前关卡\r\n    displayLevel(numberArr: number[][]) {\r\n        let newNumberArr: number[][] = [];\r\n        for (let col = 0; col < this.colNum; col++) {\r\n            let colArr: number[] = numberArr[col];\r\n            newNumberArr.push(colArr);\r\n            for (let row = 0; row < this.rowNum; row++) {\r\n                this.createItem(row, col, colArr[row]);\r\n            }\r\n        }\r\n        return newNumberArr;\r\n    }\r\n\r\n    createItem(row: number, col: number, labelNum: number) {\r\n        //确定显示位置\r\n        let item: cc.Node = cc.instantiate(this.initNode);\r\n        let pos: cc.Vec2 = cc.v2(this.initPos.x + col * this.colDif + (col - 2) * 10 * row, this.initPos.y - row * this.rowDif);\r\n        item.setParent(this.itemParent);\r\n        item.setPosition(pos);\r\n        item.active = true;\r\n        //确定显示数字\r\n        item.getChildByName(\"label\").getComponent(cc.Label).string = String(labelNum);\r\n        //节点名称为行+列\r\n        item.name = row + \"\" + col;\r\n\r\n        if (labelNum == 0) {\r\n            item.getChildByName(\"stone\").active = false;\r\n            item.getChildByName(\"label\").active = false;\r\n            item.getChildByName(\"right\").active = true;\r\n            Utils.setSpriteFrame(item.getChildByName(\"right\"), \"item\" + col);\r\n        } else {\r\n            item.getChildByName(\"stone\").active = true;\r\n            item.getChildByName(\"label\").active = true;\r\n            item.getChildByName(\"right\").active = false;\r\n            //添加点击事件\r\n            this.addTouchEvent(item);\r\n        }\r\n    }\r\n\r\n    addTouchEvent(item: cc.Node) {\r\n        item.on(cc.Node.EventType.TOUCH_START, this.onTouchNum, this);\r\n    }\r\n\r\n    removeTouchEvent(item: cc.Node) {\r\n        item.off(cc.Node.EventType.TOUCH_START, this.onTouchNum, this);\r\n    }\r\n    onTouchNum(e) {\r\n        let touchNode: cc.Node = e.target;\r\n        ListenerManager.dispatch(EventType.TOUCH_ITEM, touchNode);\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}