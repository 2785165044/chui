{"version":3,"sources":["assets\\Script\\Main\\MainGame.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { EventType } from \"../Data/EventType\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { ListenerManager } from \"../Manager/ListenerManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { Utils } from \"../Manager/Utils\";\r\nimport super_html_playable from \"./super_html_playable\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class MainGame extends cc.Component {\r\n    /**记录屏幕尺寸 */\r\n    private clientSize: cc.Size = cc.size(0, 0);\r\n    //结束界面\r\n    @property(cc.Node)\r\n    private end: cc.Node = null;\r\n    //下载按钮\r\n    @property(cc.Node)\r\n    private dowlandBtn: cc.Node = null;\r\n    @property(cc.Node)\r\n    private logoNode: cc.Node = null;\r\n\r\n\r\n    protected onLoad(): void {\r\n        if (GameManager.isMultilingual) {\r\n            GameManager.curLanguage = cc.sys.languageCode.slice(0, 2);\r\n        }\r\n        Utils.setSpriteFrame(this.logoNode, \"logo-\" + GameManager.curLanguage);\r\n\r\n        super_html_playable.set_google_play_url(\"https://play.google.com/store/apps/details?id=com.gm11.bingocraze&hl=us_en&gl=us\");\r\n        super_html_playable.set_app_store_url(\"https://apps.apple.com/us/app/bingo-aloha-vegas-bingo-games/id1562265193\");\r\n\r\n        if (window[\"isMute\"] != undefined) {\r\n            if (window[\"isMute\"] == true) {\r\n                console.log(\"启动开始就开启静音\");\r\n                GameManager.isMute = true;\r\n                SoundManager.stopAll();\r\n                ListenerManager.dispatch(EventType.MUTE_OPEN);\r\n            }\r\n            else {\r\n                console.log(\"启动开始就关闭静音\");\r\n                GameManager.isMute = false;    //给游戏全局音频解除静音\r\n                ListenerManager.dispatch(EventType.MUTE_CLOSE);\r\n                if (GameManager.canPlayAudio) {\r\n                    SoundManager.playEffect(\"bgm\", true, false, false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.changeDesignResolution();\r\n        cc.view.setResizeCallback(() => {\r\n            this.changeDesignResolution();\r\n        });\r\n\r\n\r\n        //游戏结束\r\n        ListenerManager.on(EventType.GAME_OVER, () => {\r\n            this.end.active = true;\r\n        }, this);\r\n\r\n        ListenerManager.on(EventType.GAME_FAIL, () => {\r\n\r\n        }, this);\r\n\r\n        //下载\r\n        ListenerManager.on(EventType.CLICK_DOWLAND_BTN, () => {\r\n            console.log(\"下载\");\r\n            super_html_playable.download();\r\n            // window.open();\r\n\r\n        }, this);\r\n\r\n        // this.dowlandBtn.on(cc.Node.EventType.TOUCH_START, () => {\r\n        //     ListenerManager.dispatch(EventType.CLICK_DOWLAND_BTN);\r\n        // });\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.playBgm, this);\r\n    }\r\n\r\n    //播放背景音乐\r\n    playBgm() {\r\n        GameManager.canPlayAudio = true;\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.playBgm, this);\r\n        SoundManager.playEffect(\"bgm\", true, false, false);\r\n    }\r\n\r\n    /**\r\n    * 屏幕适配\r\n    * @returns \r\n    */\r\n    changeDesignResolution() {\r\n        let size: cc.Size = cc.view.getFrameSize();\r\n        //未检测到尺寸变化则跳出函数\r\n        if (size.width == this.clientSize.width && size.height == this.clientSize.height) {\r\n            return;\r\n        }\r\n        //获取当前屏幕宽高\r\n        let frameWidth = cc.view.getFrameSize().width;\r\n        let frameHeight = cc.view.getFrameSize().height;\r\n        if (frameHeight >= frameWidth) {\r\n            cc.Canvas.instance.fitHeight = false;\r\n            cc.Canvas.instance.fitWidth = true;\r\n            if (frameWidth >= 540 || frameHeight <= 480) {\r\n                cc.Canvas.instance.fitHeight = true;\r\n                cc.Canvas.instance.fitWidth = false;\r\n            } else {\r\n                cc.Canvas.instance.fitHeight = false;\r\n                cc.Canvas.instance.fitWidth = true;\r\n            }\r\n            this.node.scale = 1;\r\n            this.node.getChildByName(\"tip\").setScale(1);\r\n            GameManager.screenMode = 0;\r\n            ListenerManager.dispatch(EventType.SCREEN_V);\r\n        } else {\r\n            cc.Canvas.instance.fitWidth = false;\r\n            cc.Canvas.instance.fitHeight = true;\r\n            if (frameWidth >= 1024) {\r\n                this.node.scale = 1;\r\n            } else {\r\n                this.node.scale = 1.1;\r\n            }\r\n            this.node.getChildByName(\"tip\").setScale(2);\r\n\r\n            GameManager.screenMode = 1;\r\n            ListenerManager.dispatch(EventType.SCREEN_H);\r\n        }\r\n    }\r\n}\r\n\r\nwindow.muteOpen = function () {\r\n    console.log(\"静音开启\");\r\n    GameManager.isMute = true;\r\n    SoundManager.stopAll(); //给游戏全局音频进行静音处理\r\n    //注意全局静音后，加判断不允许新的音频播放\r\n    ListenerManager.dispatch(EventType.MUTE_OPEN);\r\n}\r\n\r\nwindow.muteClose = function () {\r\n    console.log(\"静音关闭\");\r\n    GameManager.isMute = false;    //给游戏全局音频解除静音\r\n    ListenerManager.dispatch(EventType.MUTE_CLOSE);\r\n    if (GameManager.canPlayAudio) {\r\n        SoundManager.playEffect(\"bgm\", true, false, false);\r\n    }\r\n}\r\n"]}